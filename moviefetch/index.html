<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
#container{
display: grid;
grid-template-columns: repeat(4,300px);
grid-template-rows: auto;
gap: 20px;

}
#errorimage>img{
 width: 1000px;
 height: 800px;
margin: auto;

}






    </style>
</head>
<body>
<div>
     




</div>


 <input type="text" placeholder="movie name" id="movieinput"/>
 <button id="but" onclick="getdata()">search</button> 

 <div id="errorimage"></div>
 <div id="container"></div>
</body>
</html>

<script>


function getdata(){

async function result(){
    var movie=document.querySelector("#movieinput").value
    var url=`http://www.omdbapi.com/?s=${movie}&apikey=acbb71dc`
   try{
    var res=await fetch(url)
    var data=await res.json()
    append(data.Search)
    // console.log(data.Search) 

   }

   catch(err){

    console.log(err)
    var imagtag =document.createElement("img")
    imagtag.setAttribute("src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTw0gxr62hAYQXkN48CYpPUBLKTghv-CLMI0Q&usqp=CAU")
    document.getElementById("errorimage").append(imagtag)
   }
}

result()


var arr=[]
function append(data){
    // console.log(data)
data.forEach(function(ele){
    
var divtag=document.createElement("div")
document.querySelector("#container").append(divtag)

var imagetag1=document.createElement("img")
imagetag1.setAttribute("src",ele.Poster)
divtag.append(imagetag1)

var h2tag=document.createElement("h2")
h2tag.innerText="Title"+" "+ele.Title
divtag.append(h2tag)

var h3tag=document.createElement("h3")
h3tag.innerText="Year"+" "+ele.Year
divtag.append(h3tag)


var ptag=document.createElement("p")
ptag.innerText="Type"+" "+ele.Type
divtag.append(ptag)


async function rate(){
var rating=ele.imdbID
var url1=`http://www.omdbapi.com/?i=${rating}&apikey=acbb71dc`

var a=await fetch(url1)
var data1=await a.json()
// console.log(data1.imdbRating)
var output=(rateresult(data1.imdbRating))
}

function rateresult(imdbID){

var rate=imdbID
var ptag1=document.createElement("p")
ptag1.innerText="imdbID"+" "+rate
divtag.append(ptag1)
return rate
}













rate()
});















}
















}

























/*
// function getdata(){
// var url=`http://www.omdbapi.com/?s=${movie}&apikey=acbb71dc`
// fetch(url).then(function(res){
// res.json().then(function(res){

//     console.log(res.Search)
// })
// })

// fetch(url).catch(function(err){

// console.log(err)
// var imagtag =document.createElement("img")
// imagtag.setAttribute("src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTw0gxr62hAYQXkN48CYpPUBLKTghv-CLMI0Q&usqp=CAU")
// document.getElementById("errorimage").append(imagtag)

// })
// }
*/













































</script>